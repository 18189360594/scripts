#!/usr/bin/perl
use File::Find;

my $result = 0, $basedir = "/sw";
my $PACKAGE_PATH = $ENV{PACKAGE_PATH};

DO_CHECKS:
{
	# The "19" specifies the index of the localized error string in
	# {English,Spanish,etc}.lproj/InstallationCheck.strings
	print "running InstallationCheck...\n";
	if ((-e "$basedir") || (-l "$basedir"))
	{
	  print "Fink Installer: ROOT /sw exists!\n";
	  $result = ((1 << 6) | (1 << 5) | 19);
  	  last;
	} 

	$TargetSystemBuild = qx{defaults read /System/Library/CoreServices/SystemVersion ProductBuildVersion};
	chomp $TargetSystemBuild;

#6C35
#6C115
#7B85
	if ($TargetSystemBuild lt "8A428")
	{
	print "Fink Installer: Fink requires Mac OS X 10.4 (Tiger) or later! Bailing out..\n";
       	$result = ((1 << 6) | (1 << 5) | 20);
        last;
	}
}

exit $result;
